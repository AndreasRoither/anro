---
import PageShell from "../components/PageShell.astro";
import {
  leadArticle,
  articles,
  pullQuote,
  classifieds,
  time,
} from "../data/thoughts";

const linkClass =
  "text-[var(--anro-accent)] underline decoration-1 underline-offset-2 transition-colors duration-150 hover:text-[var(--anro-accent-light)]";
const firstLetterClass =
  "first-letter:font-black first-letter:text-[3.2em] first-letter:float-left first-letter:leading-[0.8] first-letter:mr-[0.1em] first-letter:mt-[0.05em] first-letter:text-[var(--anro-accent)]";
const articleBodyClass =
  "text-[0.95rem] leading-[1.7] [&_p]:m-0 [&_p]:mb-[0.85rem] [&_p]:text-justify [&_p]:hyphens-auto";
---

<PageShell
  title="Thoughts - Matcha Pixels"
  termTitle="thoughts"
  shellCommand="cat the-matcha-times.md"
  wide
>
  <!-- Masthead -->
  <header class="mb-8 text-center">
    <div
      class="my-3 border-t-3 border-none [border-top-style:double] border-(--anro-text)"
    >
    </div>
    <h1
      class="my-2 text-[clamp(2rem,6vw,3.5rem)] leading-tight font-black tracking-[0.15em]"
    >
      THE MATCHA TIMES
    </h1>
    <p
      class="m-0 mb-2 text-[clamp(0.85rem,2vw,1.1rem)] text-(--anro-accent) italic"
    >
      Steaming thoughts
    </p>
    <div
      class="my-3 border-t-3 border-none [border-top-style:double] border-(--anro-text)"
    >
    </div>
    <p class="my-2 text-[0.8rem] tracking-widest text-(--anro-text-faint)">
      {time}
    </p>
    <div class="my-6 border-t border-none border-(--anro-bar-border)"></div>
  </header>

  <!-- Lead Article -->
  <section class="mb-4" aria-label="Lead article">
    <article>
      <h2
        class="m-0 mb-[0.35rem] text-[clamp(1.25rem,3vw,1.75rem)] leading-tight font-bold"
      >
        {leadArticle.title}
      </h2>
      <p
        class="m-0 mb-3 text-xs tracking-[0.05em] text-(--anro-text-faint) uppercase"
      >
        {leadArticle.author} &middot; {leadArticle.desk}
      </p>
      <div class={articleBodyClass}>
        {
          leadArticle.paragraphs.map((text, i) =>
            i === 0 ? (
              <p class={firstLetterClass} set:html={text} />
            ) : i === leadArticle.paragraphs.length - 1 ? (
              <p>
                <Fragment set:html={text} />{" "}
              </p>
            ) : (
              <p set:html={text} />
            ),
          )
        }
      </div>
    </article>
  </section>

  <div class="my-6 border-t border-none border-(--anro-bar-border)"></div>

  <!-- Newspaper Columns -->
  <section
    class="columns-2 gap-8 [column-rule:1px_solid_var(--anro-bar-border)] max-[600px]:columns-1 md:columns-3"
    aria-label="Articles"
  >
    {
      articles.map((article) => (
        <article class="mb-6 break-inside-avoid">
          <h2 class="m-0 mb-[0.35rem] text-[clamp(1.25rem,3vw,1.75rem)] leading-tight font-bold">
            {article.title}
          </h2>
          <p class="m-0 mb-3 text-xs tracking-[0.05em] text-(--anro-text-faint) uppercase">
            {article.desk}
          </p>
          <div class={articleBodyClass}>
            {article.paragraphs.map((text, i) =>
              i === 0 ? (
                <p class={firstLetterClass} set:html={text} />
              ) : i === article.paragraphs.length - 1 ? (
                <p>
                  <Fragment set:html={text} />{" "}
                </p>
              ) : (
                <p set:html={text} />
              ),
            )}
          </div>
        </article>
      ))
    }
  </section>

  <div class="my-6 border-t border-none border-(--anro-bar-border)"></div>

  <!-- Pull Quote -->
  <aside class="m-0 px-8 py-6 text-center" aria-label="Featured quote">
    <blockquote
      class="relative m-0 text-[clamp(1.05rem,2.5vw,1.35rem)] leading-relaxed text-(--anro-accent) italic"
    >
      <span
        class="align-[-0.3em] text-[2.5em] leading-none opacity-40"
        aria-hidden="true">&ldquo;</span
      >
      {pullQuote.text}
      <span
        class="align-[-0.3em] text-[2.5em] leading-none opacity-40"
        aria-hidden="true">&rdquo;</span
      >
    </blockquote>
    <cite
      class="mt-3 block text-[0.8rem] tracking-[0.05em] text-(--anro-text-faint) not-italic"
      >â€” {pullQuote.attribution}</cite
    >
  </aside>

  <div class="my-6 border-t border-none border-(--anro-bar-border)"></div>

  <!-- Classifieds Section -->
  <section class="mt-2" aria-label="Classified advertisements">
    <h2
      class="m-0 mb-4 border-b-2 border-(--anro-text) pb-2 text-center text-[1.3rem] font-black tracking-[0.2em]"
    >
      CLASSIFIEDS
    </h2>
    <div class="grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4">
      {
        classifieds.map((item) => (
          <div
            class:list={[
              "border border-(--anro-bar-border) p-[0.85rem] text-[0.82rem] leading-[1.55] [&_p]:m-0",
              item.category === "SERVICES" &&
                "[&_code]:rounded-sm [&_code]:bg-(--anro-hover-bg) [&_code]:px-[0.3em] [&_code]:py-[0.1em] [&_code]:font-mono [&_code]:text-[0.85em]",
            ]}
          >
            <h3 class="m-0 mb-[0.4rem] text-[0.8rem] font-bold tracking-[0.12em] text-(--anro-accent)">
              {item.category}
            </h3>
            <p set:html={item.body} />
          </div>
        ))
      }
    </div>
  </section>

  <!-- Footer -->
  <footer class="mt-8 text-center">
    <div
      class="my-3 border-t-3 border-none [border-top-style:double] border-(--anro-text)"
    >
    </div>
    <p class="mt-3 text-xs text-(--anro-text-faint)">
      &copy; 2026 The Matcha Times &middot; A publication of
      <a href="https://anro.dev" class={linkClass}>anro.dev</a>
      &middot; Printed on recycled pixels
    </p>
  </footer>
</PageShell>
